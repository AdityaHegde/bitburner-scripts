import type { InfiltrationMocks } from "$src/exploits/infiltration/InfiltrationMocks";
import type { InfiltrationSolverFunction } from "$src/exploits/infiltration/solvers/keyCodes";

const ComplementBrackets = {
  "(": ")",
  "{": "}",
  "[": "]",
  "<": ">",
};

export const closeTheBrackets: InfiltrationSolverFunction = async (
  mocks: InfiltrationMocks,
  infiltrationBody: HTMLElement,
) => {
  const problem = infiltrationBody.querySelector("p").textContent.trim().replace("|", "");
  for (let i = problem.length - 1; i >= 0; i--) {
    await mocks.enterKey(ComplementBrackets[problem[i]]);
  }
};
