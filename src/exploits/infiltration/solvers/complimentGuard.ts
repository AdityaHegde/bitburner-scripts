import type { InfiltrationSolverFunction } from "$src/exploits/infiltration/solvers/keyCodes";
import { KeyCodes } from "$src/exploits/infiltration/solvers/keyCodes";
import type { InfiltrationMocks } from "$src/exploits/infiltration/InfiltrationMocks";

const positive = [
  "affectionate",
  "agreeable",
  "bright",
  "charming",
  "creative",
  "determined",
  "energetic",
  "friendly",
  "funny",
  "generous",
  "polite",
  "likable",
  "diplomatic",
  "helpful",
  "giving",
  "kind",
  "hardworking",
  "patient",
  "dynamic",
  "loyal",
  "straightforward",
];

export const complimentGuard: InfiltrationSolverFunction = async (
  mocks: InfiltrationMocks,
  infiltrationBody: HTMLElement,
) => {
  let done = false;
  while (!done) {
    const say = infiltrationBody.querySelector(".MuiTypography-h5:nth-child(3)").textContent.trim();
    if (positive.indexOf(say) === -1) {
      await mocks.enterKey(KeyCodes.DOWN_ARROW);
    } else {
      await mocks.enterKey(KeyCodes.SPACE);
      done = true;
    }
  }
};
