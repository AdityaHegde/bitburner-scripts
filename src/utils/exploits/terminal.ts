let terminalInput: HTMLInputElement;
let handler: string;
const enterEvent = new KeyboardEvent("keydown", {
  bubbles: true,
  cancelable: true,
  key: "Enter",
});

export function init() {
  // Work around the RAM cost of document
  const doc: Document = eval("document");
  // Acquire a reference to the terminal text field
  terminalInput = doc.getElementById("terminal-input") as HTMLInputElement;
  // Get a reference to the React event handler.
  handler = Object.keys(terminalInput)[1];
}

// Runs in the terminal whatever string is passed to the function
export function runTerminalCommand(str) {
  terminalInput.value = str;
  terminalInput[handler].onChange({ target: terminalInput });
  terminalInput.dispatchEvent(enterEvent);
}
